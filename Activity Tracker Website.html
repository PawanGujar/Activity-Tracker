<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Activity Tracker App</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <div class="navbar">
    <div class="nav-brand" style="display:flex; align-items:center; gap:10px;">
      <img src="https://ui-avatars.com/api/?name=AT&background=1e3a8a&color=fff&size=40&rounded=true" alt="Profile" class="profile-dp" />
      Activity Tracker
    </div>
    <div class="nav-tabs">
      <a id="tab-home" onclick="showTab('home')">Home</a>
      <a id="tab-dashboard" onclick="showTab('dashboard')">Dashboard</a>
    </div>
    <div style="display:flex; align-items:center; gap:10px;">
      <div class="add-day add-day-top" onclick="addDay()" title="Add Day">+</div>
      <div class="theme-toggle" id="themeToggle" onclick="toggleTheme()">
        <span id="themeIcon">ðŸŒ™</span>
      </div>
    </div>
  </div>
  <div id="tabs">
    <div id="home" class="container">
      <div id="days-container"></div>
    </div>
    <div id="dashboard" class="container" style="display:none;">
      <div class="filters">
        <select id="chartRange" onchange="renderDashboardChart()">
          <option value="day">Day</option>
          <option value="week">Week</option>
          <option value="month">Month</option>
        </select>
        <select id="dayFilter" onchange="renderDashboardChart()"></select>
        <select id="metricFilter" onchange="renderDashboardChart()">
          <option value="time">Time Spent</option>
          <option value="count">Repeat Count</option>
        </select>
      </div>
      <div id="totalTimeSpent" style="text-align:center; font-size:20px; font-weight:bold; margin-bottom:10px; color:#1e3a8a;"></div>
      <canvas id="dashboardChart" width="400" height="400" style="max-width:100%; height:auto; display:block; margin:auto;"></canvas>
      <!-- Removed dashboardMissingList: missing activities card list no longer needed -->
      <div id="missedActivitiesSection" style="margin-top:30px;">
        <label style="font-weight:bold; color:#ef4444;">Missing Activities for Selected Day:</label>
        <canvas id="missedActivitiesChart" width="400" height="200" style="max-width:100%; height:auto; display:block; margin:auto;"></canvas>
      </div>
    </div>
  </div>
  <footer>Â© 2025 Pawan Gujar. All rights reserved.</footer>

  <script src="scripts.js"></script>
  <script>
    // Ensure chart renders when dashboard tab is shown
    const originalShowTab = window.showTab;
    window.showTab = function(tab) {
      originalShowTab(tab);
      if (tab === 'dashboard') {
        renderDashboardChart();
      }
      // Highlight active tab
      document.getElementById('tab-home').classList.toggle('active-tab', tab === 'home');
      document.getElementById('tab-dashboard').classList.toggle('active-tab', tab === 'dashboard');
    };
    // Set initial active tab
    document.getElementById('tab-home').classList.add('active-tab');

    // Swipe gesture support for tab switching
    let touchStartX = 0;
    let touchEndX = 0;
    function handleGesture() {
      if (touchEndX < touchStartX - 50) {
        // Swipe left: Home -> Dashboard
        if (document.getElementById('home').style.display !== 'none') {
          showTab('dashboard');
        }
      }
      if (touchEndX > touchStartX + 50) {
        // Swipe right: Dashboard -> Home
        if (document.getElementById('dashboard').style.display !== 'none') {
          showTab('home');
        }
      }
    }
    document.addEventListener('touchstart', function(e) {
      touchStartX = e.changedTouches[0].screenX;
    });
    document.addEventListener('touchend', function(e) {
      touchEndX = e.changedTouches[0].screenX;
      handleGesture();
    });
  </script>
</body>
</html>
